"use strict";$(function(){$.ajax({type:"get",url:"http://47.104.244.134:8080/cartlist.do",data:{token:$.cookie("token")},success:function(t){var e="";for(var c in t)e+="<li id="+t[c].id+"  gid="+t[c].gid+'>\n\t\t\t\t\t\t<input type="checkbox" class="check">\n\t\t\t\t\t\t<img src="'+t[c].goods.picurl+'">\n\t\t\t\t\t\t<span class="name">'+t[c].goods.name+'</span>\n\t\t\t\t\t\t<span class="price">'+t[c].goods.price+'</span>\n\t\t\t\t\t\t<span class="reduce">-</span>\n\t\t\t\t\t\t<input type="text" class="nums" value="'+t[c].count+'">\n\t\t\t\t\t\t<span class="add">+</span>\n\t\t\t\t\t\t<span class="perPrice">'+t[c].count*t[c].goods.price+'</span>\n\t\t\t\t\t\t<strong class="del">删除</strong>\n\t\t\t\t\t</li>';function i(){var e=0;$("#cartList").find("input[type='checkbox']").each(function(t){$(this).prop("checked")&&(e+=parseInt($(".perPrice").eq(t).text()),console.log(e))}),$("#totalPrice").text(e)}$("#cartList").html(e),$(".reduce").each(function(){$(this).on("click",function(){var t=parseInt($(this).next().val());if(--t<=1)t=1;else{$.ajax({type:"get",url:"http://47.104.244.134:8080/cartupdate.do",data:{id:$(this).parent("li").attr("id"),gid:$(this).parent("li").attr("gid"),num:-1,token:$.cookie("token")},success:function(t){console.log(t)}}),$(this).next().val(t);var e=$(this).parent("li").children(".price").text();$(this).parent("li").children(".perPrice").text(e*t),i()}})}),$(".add").each(function(){$(this).on("click",function(){var t=parseInt($(this).prev().val());t++,$(this).prev().val(t),$.ajax({type:"get",url:"http://47.104.244.134:8080/cartupdate.do",data:{id:$(this).parent("li").attr("id"),gid:$(this).parent("li").attr("gid"),num:1,token:$.cookie("token")},success:function(t){console.log(t)}});var e=$(this).parent("li").children(".price").text();$(this).parent("li").children(".perPrice").text(e*t),i()})}),$(".del").each(function(){$(this).on("click",function(){$(this).parent("li").remove(),$.ajax({type:"get",url:"http://47.104.244.134:8080/cartupdate.do",data:{id:$(this).parent("li").attr("id"),gid:$(this).parent("li").attr("gid"),num:0,token:$.cookie("token")},success:function(t){console.log(t)}}),i()})}),$("#checkAll").click(function(){$(".check").prop("checked",$(this).prop("checked")),i()}),$(".check").click(function(){console.log($("li input:checked")),$("li input:checked").length==$("#cartList li").length?$("#checkAll").prop("checked",!0):$("#checkAll").prop("checked",!1),i()})}})});